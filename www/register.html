<!doctype html>
<html lang="en">
    <head>
      <title>Registration</title>
      <script type="text/javascript">
        function submitForm() {
          var form = document.getElementById("form")
          const data = new URLSearchParams(new FormData(form))

          fetch(window.location.href, {method: 'post', body: data})
            .then(res => res.json())
            .then(function(data) {
            if (data == null) {
              alert('Server Error!')
              return
            }

            if (data.Error.length > 0) {
              alert('Error: ' + data.Error)
              return
            }

            window.location.href = "/"
          }).catch(function(err) {
            alert('Server Error')
            console.log(err)
          })
        }
      </script>
    </head>

    <body>
      Registration page Yeah!
      <form method="post" id="form">
        <div>
        E-mail: <input name="email"/>
        </div>
        <div>
        Name: <input name="name"/>
        </div>
        <div>
        Password: <input type="password" name="password"/>
        </div>
        <input type="button" onclick="submitForm()" value="Register"></input>
      </form>
    </body>
</html>
